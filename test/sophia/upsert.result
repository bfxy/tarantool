-- upsert (str)
space = box.schema.space.create('test', { engine = 'sophia' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'str'} })
---
...
for key = 1, 100 do space:upsert({tostring(key)}, {{'+', 2, 1}}, {tostring(key), 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({tostring(key)})) end
---
...
t
---
- - ['1', 1]
  - ['2', 1]
  - ['3', 1]
  - ['4', 1]
  - ['5', 1]
  - ['6', 1]
  - ['7', 1]
  - ['8', 1]
  - ['9', 1]
  - ['10', 1]
  - ['11', 1]
  - ['12', 1]
  - ['13', 1]
  - ['14', 1]
  - ['15', 1]
  - ['16', 1]
  - ['17', 1]
  - ['18', 1]
  - ['19', 1]
  - ['20', 1]
  - ['21', 1]
  - ['22', 1]
  - ['23', 1]
  - ['24', 1]
  - ['25', 1]
  - ['26', 1]
  - ['27', 1]
  - ['28', 1]
  - ['29', 1]
  - ['30', 1]
  - ['31', 1]
  - ['32', 1]
  - ['33', 1]
  - ['34', 1]
  - ['35', 1]
  - ['36', 1]
  - ['37', 1]
  - ['38', 1]
  - ['39', 1]
  - ['40', 1]
  - ['41', 1]
  - ['42', 1]
  - ['43', 1]
  - ['44', 1]
  - ['45', 1]
  - ['46', 1]
  - ['47', 1]
  - ['48', 1]
  - ['49', 1]
  - ['50', 1]
  - ['51', 1]
  - ['52', 1]
  - ['53', 1]
  - ['54', 1]
  - ['55', 1]
  - ['56', 1]
  - ['57', 1]
  - ['58', 1]
  - ['59', 1]
  - ['60', 1]
  - ['61', 1]
  - ['62', 1]
  - ['63', 1]
  - ['64', 1]
  - ['65', 1]
  - ['66', 1]
  - ['67', 1]
  - ['68', 1]
  - ['69', 1]
  - ['70', 1]
  - ['71', 1]
  - ['72', 1]
  - ['73', 1]
  - ['74', 1]
  - ['75', 1]
  - ['76', 1]
  - ['77', 1]
  - ['78', 1]
  - ['79', 1]
  - ['80', 1]
  - ['81', 1]
  - ['82', 1]
  - ['83', 1]
  - ['84', 1]
  - ['85', 1]
  - ['86', 1]
  - ['87', 1]
  - ['88', 1]
  - ['89', 1]
  - ['90', 1]
  - ['91', 1]
  - ['92', 1]
  - ['93', 1]
  - ['94', 1]
  - ['95', 1]
  - ['96', 1]
  - ['97', 1]
  - ['98', 1]
  - ['99', 1]
  - ['100', 1]
...
for key = 1, 100 do space:upsert({tostring(key)}, {{'+', 2, 10}}, {tostring(key), 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({tostring(key)})) end
---
...
t
---
- - ['1', 11]
  - ['2', 11]
  - ['3', 11]
  - ['4', 11]
  - ['5', 11]
  - ['6', 11]
  - ['7', 11]
  - ['8', 11]
  - ['9', 11]
  - ['10', 11]
  - ['11', 11]
  - ['12', 11]
  - ['13', 11]
  - ['14', 11]
  - ['15', 11]
  - ['16', 11]
  - ['17', 11]
  - ['18', 11]
  - ['19', 11]
  - ['20', 11]
  - ['21', 11]
  - ['22', 11]
  - ['23', 11]
  - ['24', 11]
  - ['25', 11]
  - ['26', 11]
  - ['27', 11]
  - ['28', 11]
  - ['29', 11]
  - ['30', 11]
  - ['31', 11]
  - ['32', 11]
  - ['33', 11]
  - ['34', 11]
  - ['35', 11]
  - ['36', 11]
  - ['37', 11]
  - ['38', 11]
  - ['39', 11]
  - ['40', 11]
  - ['41', 11]
  - ['42', 11]
  - ['43', 11]
  - ['44', 11]
  - ['45', 11]
  - ['46', 11]
  - ['47', 11]
  - ['48', 11]
  - ['49', 11]
  - ['50', 11]
  - ['51', 11]
  - ['52', 11]
  - ['53', 11]
  - ['54', 11]
  - ['55', 11]
  - ['56', 11]
  - ['57', 11]
  - ['58', 11]
  - ['59', 11]
  - ['60', 11]
  - ['61', 11]
  - ['62', 11]
  - ['63', 11]
  - ['64', 11]
  - ['65', 11]
  - ['66', 11]
  - ['67', 11]
  - ['68', 11]
  - ['69', 11]
  - ['70', 11]
  - ['71', 11]
  - ['72', 11]
  - ['73', 11]
  - ['74', 11]
  - ['75', 11]
  - ['76', 11]
  - ['77', 11]
  - ['78', 11]
  - ['79', 11]
  - ['80', 11]
  - ['81', 11]
  - ['82', 11]
  - ['83', 11]
  - ['84', 11]
  - ['85', 11]
  - ['86', 11]
  - ['87', 11]
  - ['88', 11]
  - ['89', 11]
  - ['90', 11]
  - ['91', 11]
  - ['92', 11]
  - ['93', 11]
  - ['94', 11]
  - ['95', 11]
  - ['96', 11]
  - ['97', 11]
  - ['98', 11]
  - ['99', 11]
  - ['100', 11]
...
for key = 1, 100 do space:delete({tostring(key)}) end
---
...
for key = 1, 100 do space:upsert({tostring(key)}, {{'+', 2, 1}, {'=', 3, key}}, {tostring(key), 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({tostring(key)})) end
---
...
t
---
- - ['1', 1, 1]
  - ['2', 1, 2]
  - ['3', 1, 3]
  - ['4', 1, 4]
  - ['5', 1, 5]
  - ['6', 1, 6]
  - ['7', 1, 7]
  - ['8', 1, 8]
  - ['9', 1, 9]
  - ['10', 1, 10]
  - ['11', 1, 11]
  - ['12', 1, 12]
  - ['13', 1, 13]
  - ['14', 1, 14]
  - ['15', 1, 15]
  - ['16', 1, 16]
  - ['17', 1, 17]
  - ['18', 1, 18]
  - ['19', 1, 19]
  - ['20', 1, 20]
  - ['21', 1, 21]
  - ['22', 1, 22]
  - ['23', 1, 23]
  - ['24', 1, 24]
  - ['25', 1, 25]
  - ['26', 1, 26]
  - ['27', 1, 27]
  - ['28', 1, 28]
  - ['29', 1, 29]
  - ['30', 1, 30]
  - ['31', 1, 31]
  - ['32', 1, 32]
  - ['33', 1, 33]
  - ['34', 1, 34]
  - ['35', 1, 35]
  - ['36', 1, 36]
  - ['37', 1, 37]
  - ['38', 1, 38]
  - ['39', 1, 39]
  - ['40', 1, 40]
  - ['41', 1, 41]
  - ['42', 1, 42]
  - ['43', 1, 43]
  - ['44', 1, 44]
  - ['45', 1, 45]
  - ['46', 1, 46]
  - ['47', 1, 47]
  - ['48', 1, 48]
  - ['49', 1, 49]
  - ['50', 1, 50]
  - ['51', 1, 51]
  - ['52', 1, 52]
  - ['53', 1, 53]
  - ['54', 1, 54]
  - ['55', 1, 55]
  - ['56', 1, 56]
  - ['57', 1, 57]
  - ['58', 1, 58]
  - ['59', 1, 59]
  - ['60', 1, 60]
  - ['61', 1, 61]
  - ['62', 1, 62]
  - ['63', 1, 63]
  - ['64', 1, 64]
  - ['65', 1, 65]
  - ['66', 1, 66]
  - ['67', 1, 67]
  - ['68', 1, 68]
  - ['69', 1, 69]
  - ['70', 1, 70]
  - ['71', 1, 71]
  - ['72', 1, 72]
  - ['73', 1, 73]
  - ['74', 1, 74]
  - ['75', 1, 75]
  - ['76', 1, 76]
  - ['77', 1, 77]
  - ['78', 1, 78]
  - ['79', 1, 79]
  - ['80', 1, 80]
  - ['81', 1, 81]
  - ['82', 1, 82]
  - ['83', 1, 83]
  - ['84', 1, 84]
  - ['85', 1, 85]
  - ['86', 1, 86]
  - ['87', 1, 87]
  - ['88', 1, 88]
  - ['89', 1, 89]
  - ['90', 1, 90]
  - ['91', 1, 91]
  - ['92', 1, 92]
  - ['93', 1, 93]
  - ['94', 1, 94]
  - ['95', 1, 95]
  - ['96', 1, 96]
  - ['97', 1, 97]
  - ['98', 1, 98]
  - ['99', 1, 99]
  - ['100', 1, 100]
...
space:drop()
---
...
-- upsert (num)
space = box.schema.space.create('test', { engine = 'sophia' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'num'} })
---
...
for key = 1, 100 do space:upsert({key}, {{'+', 2, 1}}, {key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1, 1]
  - [2, 1]
  - [3, 1]
  - [4, 1]
  - [5, 1]
  - [6, 1]
  - [7, 1]
  - [8, 1]
  - [9, 1]
  - [10, 1]
  - [11, 1]
  - [12, 1]
  - [13, 1]
  - [14, 1]
  - [15, 1]
  - [16, 1]
  - [17, 1]
  - [18, 1]
  - [19, 1]
  - [20, 1]
  - [21, 1]
  - [22, 1]
  - [23, 1]
  - [24, 1]
  - [25, 1]
  - [26, 1]
  - [27, 1]
  - [28, 1]
  - [29, 1]
  - [30, 1]
  - [31, 1]
  - [32, 1]
  - [33, 1]
  - [34, 1]
  - [35, 1]
  - [36, 1]
  - [37, 1]
  - [38, 1]
  - [39, 1]
  - [40, 1]
  - [41, 1]
  - [42, 1]
  - [43, 1]
  - [44, 1]
  - [45, 1]
  - [46, 1]
  - [47, 1]
  - [48, 1]
  - [49, 1]
  - [50, 1]
  - [51, 1]
  - [52, 1]
  - [53, 1]
  - [54, 1]
  - [55, 1]
  - [56, 1]
  - [57, 1]
  - [58, 1]
  - [59, 1]
  - [60, 1]
  - [61, 1]
  - [62, 1]
  - [63, 1]
  - [64, 1]
  - [65, 1]
  - [66, 1]
  - [67, 1]
  - [68, 1]
  - [69, 1]
  - [70, 1]
  - [71, 1]
  - [72, 1]
  - [73, 1]
  - [74, 1]
  - [75, 1]
  - [76, 1]
  - [77, 1]
  - [78, 1]
  - [79, 1]
  - [80, 1]
  - [81, 1]
  - [82, 1]
  - [83, 1]
  - [84, 1]
  - [85, 1]
  - [86, 1]
  - [87, 1]
  - [88, 1]
  - [89, 1]
  - [90, 1]
  - [91, 1]
  - [92, 1]
  - [93, 1]
  - [94, 1]
  - [95, 1]
  - [96, 1]
  - [97, 1]
  - [98, 1]
  - [99, 1]
  - [100, 1]
...
for key = 1, 100 do space:upsert({key}, {{'+', 2, 10}}, {key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1, 11]
  - [2, 11]
  - [3, 11]
  - [4, 11]
  - [5, 11]
  - [6, 11]
  - [7, 11]
  - [8, 11]
  - [9, 11]
  - [10, 11]
  - [11, 11]
  - [12, 11]
  - [13, 11]
  - [14, 11]
  - [15, 11]
  - [16, 11]
  - [17, 11]
  - [18, 11]
  - [19, 11]
  - [20, 11]
  - [21, 11]
  - [22, 11]
  - [23, 11]
  - [24, 11]
  - [25, 11]
  - [26, 11]
  - [27, 11]
  - [28, 11]
  - [29, 11]
  - [30, 11]
  - [31, 11]
  - [32, 11]
  - [33, 11]
  - [34, 11]
  - [35, 11]
  - [36, 11]
  - [37, 11]
  - [38, 11]
  - [39, 11]
  - [40, 11]
  - [41, 11]
  - [42, 11]
  - [43, 11]
  - [44, 11]
  - [45, 11]
  - [46, 11]
  - [47, 11]
  - [48, 11]
  - [49, 11]
  - [50, 11]
  - [51, 11]
  - [52, 11]
  - [53, 11]
  - [54, 11]
  - [55, 11]
  - [56, 11]
  - [57, 11]
  - [58, 11]
  - [59, 11]
  - [60, 11]
  - [61, 11]
  - [62, 11]
  - [63, 11]
  - [64, 11]
  - [65, 11]
  - [66, 11]
  - [67, 11]
  - [68, 11]
  - [69, 11]
  - [70, 11]
  - [71, 11]
  - [72, 11]
  - [73, 11]
  - [74, 11]
  - [75, 11]
  - [76, 11]
  - [77, 11]
  - [78, 11]
  - [79, 11]
  - [80, 11]
  - [81, 11]
  - [82, 11]
  - [83, 11]
  - [84, 11]
  - [85, 11]
  - [86, 11]
  - [87, 11]
  - [88, 11]
  - [89, 11]
  - [90, 11]
  - [91, 11]
  - [92, 11]
  - [93, 11]
  - [94, 11]
  - [95, 11]
  - [96, 11]
  - [97, 11]
  - [98, 11]
  - [99, 11]
  - [100, 11]
...
for key = 1, 100 do space:delete({key}) end
---
...
for key = 1, 100 do space:upsert({key}, {{'+', 2, 1}, {'=', 3, key}}, {key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1, 1, 1]
  - [2, 1, 2]
  - [3, 1, 3]
  - [4, 1, 4]
  - [5, 1, 5]
  - [6, 1, 6]
  - [7, 1, 7]
  - [8, 1, 8]
  - [9, 1, 9]
  - [10, 1, 10]
  - [11, 1, 11]
  - [12, 1, 12]
  - [13, 1, 13]
  - [14, 1, 14]
  - [15, 1, 15]
  - [16, 1, 16]
  - [17, 1, 17]
  - [18, 1, 18]
  - [19, 1, 19]
  - [20, 1, 20]
  - [21, 1, 21]
  - [22, 1, 22]
  - [23, 1, 23]
  - [24, 1, 24]
  - [25, 1, 25]
  - [26, 1, 26]
  - [27, 1, 27]
  - [28, 1, 28]
  - [29, 1, 29]
  - [30, 1, 30]
  - [31, 1, 31]
  - [32, 1, 32]
  - [33, 1, 33]
  - [34, 1, 34]
  - [35, 1, 35]
  - [36, 1, 36]
  - [37, 1, 37]
  - [38, 1, 38]
  - [39, 1, 39]
  - [40, 1, 40]
  - [41, 1, 41]
  - [42, 1, 42]
  - [43, 1, 43]
  - [44, 1, 44]
  - [45, 1, 45]
  - [46, 1, 46]
  - [47, 1, 47]
  - [48, 1, 48]
  - [49, 1, 49]
  - [50, 1, 50]
  - [51, 1, 51]
  - [52, 1, 52]
  - [53, 1, 53]
  - [54, 1, 54]
  - [55, 1, 55]
  - [56, 1, 56]
  - [57, 1, 57]
  - [58, 1, 58]
  - [59, 1, 59]
  - [60, 1, 60]
  - [61, 1, 61]
  - [62, 1, 62]
  - [63, 1, 63]
  - [64, 1, 64]
  - [65, 1, 65]
  - [66, 1, 66]
  - [67, 1, 67]
  - [68, 1, 68]
  - [69, 1, 69]
  - [70, 1, 70]
  - [71, 1, 71]
  - [72, 1, 72]
  - [73, 1, 73]
  - [74, 1, 74]
  - [75, 1, 75]
  - [76, 1, 76]
  - [77, 1, 77]
  - [78, 1, 78]
  - [79, 1, 79]
  - [80, 1, 80]
  - [81, 1, 81]
  - [82, 1, 82]
  - [83, 1, 83]
  - [84, 1, 84]
  - [85, 1, 85]
  - [86, 1, 86]
  - [87, 1, 87]
  - [88, 1, 88]
  - [89, 1, 89]
  - [90, 1, 90]
  - [91, 1, 91]
  - [92, 1, 92]
  - [93, 1, 93]
  - [94, 1, 94]
  - [95, 1, 95]
  - [96, 1, 96]
  - [97, 1, 97]
  - [98, 1, 98]
  - [99, 1, 99]
  - [100, 1, 100]
...
space:drop()
---
...
-- upsert multi-part (num, num)
space = box.schema.space.create('test', { engine = 'sophia' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'num', 2, 'num'} })
---
...
for key = 1, 100 do space:upsert({key, key}, {{'+', 3, 1}}, {key, key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key, key})) end
---
...
t
---
- - [1, 1, 1]
  - [2, 2, 1]
  - [3, 3, 1]
  - [4, 4, 1]
  - [5, 5, 1]
  - [6, 6, 1]
  - [7, 7, 1]
  - [8, 8, 1]
  - [9, 9, 1]
  - [10, 10, 1]
  - [11, 11, 1]
  - [12, 12, 1]
  - [13, 13, 1]
  - [14, 14, 1]
  - [15, 15, 1]
  - [16, 16, 1]
  - [17, 17, 1]
  - [18, 18, 1]
  - [19, 19, 1]
  - [20, 20, 1]
  - [21, 21, 1]
  - [22, 22, 1]
  - [23, 23, 1]
  - [24, 24, 1]
  - [25, 25, 1]
  - [26, 26, 1]
  - [27, 27, 1]
  - [28, 28, 1]
  - [29, 29, 1]
  - [30, 30, 1]
  - [31, 31, 1]
  - [32, 32, 1]
  - [33, 33, 1]
  - [34, 34, 1]
  - [35, 35, 1]
  - [36, 36, 1]
  - [37, 37, 1]
  - [38, 38, 1]
  - [39, 39, 1]
  - [40, 40, 1]
  - [41, 41, 1]
  - [42, 42, 1]
  - [43, 43, 1]
  - [44, 44, 1]
  - [45, 45, 1]
  - [46, 46, 1]
  - [47, 47, 1]
  - [48, 48, 1]
  - [49, 49, 1]
  - [50, 50, 1]
  - [51, 51, 1]
  - [52, 52, 1]
  - [53, 53, 1]
  - [54, 54, 1]
  - [55, 55, 1]
  - [56, 56, 1]
  - [57, 57, 1]
  - [58, 58, 1]
  - [59, 59, 1]
  - [60, 60, 1]
  - [61, 61, 1]
  - [62, 62, 1]
  - [63, 63, 1]
  - [64, 64, 1]
  - [65, 65, 1]
  - [66, 66, 1]
  - [67, 67, 1]
  - [68, 68, 1]
  - [69, 69, 1]
  - [70, 70, 1]
  - [71, 71, 1]
  - [72, 72, 1]
  - [73, 73, 1]
  - [74, 74, 1]
  - [75, 75, 1]
  - [76, 76, 1]
  - [77, 77, 1]
  - [78, 78, 1]
  - [79, 79, 1]
  - [80, 80, 1]
  - [81, 81, 1]
  - [82, 82, 1]
  - [83, 83, 1]
  - [84, 84, 1]
  - [85, 85, 1]
  - [86, 86, 1]
  - [87, 87, 1]
  - [88, 88, 1]
  - [89, 89, 1]
  - [90, 90, 1]
  - [91, 91, 1]
  - [92, 92, 1]
  - [93, 93, 1]
  - [94, 94, 1]
  - [95, 95, 1]
  - [96, 96, 1]
  - [97, 97, 1]
  - [98, 98, 1]
  - [99, 99, 1]
  - [100, 100, 1]
...
for key = 1, 100 do space:upsert({key, key}, {{'+', 3, 10}}, {key, key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key, key})) end
---
...
t
---
- - [1, 1, 11]
  - [2, 2, 11]
  - [3, 3, 11]
  - [4, 4, 11]
  - [5, 5, 11]
  - [6, 6, 11]
  - [7, 7, 11]
  - [8, 8, 11]
  - [9, 9, 11]
  - [10, 10, 11]
  - [11, 11, 11]
  - [12, 12, 11]
  - [13, 13, 11]
  - [14, 14, 11]
  - [15, 15, 11]
  - [16, 16, 11]
  - [17, 17, 11]
  - [18, 18, 11]
  - [19, 19, 11]
  - [20, 20, 11]
  - [21, 21, 11]
  - [22, 22, 11]
  - [23, 23, 11]
  - [24, 24, 11]
  - [25, 25, 11]
  - [26, 26, 11]
  - [27, 27, 11]
  - [28, 28, 11]
  - [29, 29, 11]
  - [30, 30, 11]
  - [31, 31, 11]
  - [32, 32, 11]
  - [33, 33, 11]
  - [34, 34, 11]
  - [35, 35, 11]
  - [36, 36, 11]
  - [37, 37, 11]
  - [38, 38, 11]
  - [39, 39, 11]
  - [40, 40, 11]
  - [41, 41, 11]
  - [42, 42, 11]
  - [43, 43, 11]
  - [44, 44, 11]
  - [45, 45, 11]
  - [46, 46, 11]
  - [47, 47, 11]
  - [48, 48, 11]
  - [49, 49, 11]
  - [50, 50, 11]
  - [51, 51, 11]
  - [52, 52, 11]
  - [53, 53, 11]
  - [54, 54, 11]
  - [55, 55, 11]
  - [56, 56, 11]
  - [57, 57, 11]
  - [58, 58, 11]
  - [59, 59, 11]
  - [60, 60, 11]
  - [61, 61, 11]
  - [62, 62, 11]
  - [63, 63, 11]
  - [64, 64, 11]
  - [65, 65, 11]
  - [66, 66, 11]
  - [67, 67, 11]
  - [68, 68, 11]
  - [69, 69, 11]
  - [70, 70, 11]
  - [71, 71, 11]
  - [72, 72, 11]
  - [73, 73, 11]
  - [74, 74, 11]
  - [75, 75, 11]
  - [76, 76, 11]
  - [77, 77, 11]
  - [78, 78, 11]
  - [79, 79, 11]
  - [80, 80, 11]
  - [81, 81, 11]
  - [82, 82, 11]
  - [83, 83, 11]
  - [84, 84, 11]
  - [85, 85, 11]
  - [86, 86, 11]
  - [87, 87, 11]
  - [88, 88, 11]
  - [89, 89, 11]
  - [90, 90, 11]
  - [91, 91, 11]
  - [92, 92, 11]
  - [93, 93, 11]
  - [94, 94, 11]
  - [95, 95, 11]
  - [96, 96, 11]
  - [97, 97, 11]
  - [98, 98, 11]
  - [99, 99, 11]
  - [100, 100, 11]
...
for key = 1, 100 do space:delete({key, key}) end
---
...
for key = 1, 100 do space:upsert({key, key}, {{'+', 3, 1}, {'=', 4, key}}, {key, key, 0}) end
---
...
t = {}
---
...
for key = 1, 100 do table.insert(t, space:get({key, key})) end
---
...
t
---
- - [1, 1, 1, 1]
  - [2, 2, 1, 2]
  - [3, 3, 1, 3]
  - [4, 4, 1, 4]
  - [5, 5, 1, 5]
  - [6, 6, 1, 6]
  - [7, 7, 1, 7]
  - [8, 8, 1, 8]
  - [9, 9, 1, 9]
  - [10, 10, 1, 10]
  - [11, 11, 1, 11]
  - [12, 12, 1, 12]
  - [13, 13, 1, 13]
  - [14, 14, 1, 14]
  - [15, 15, 1, 15]
  - [16, 16, 1, 16]
  - [17, 17, 1, 17]
  - [18, 18, 1, 18]
  - [19, 19, 1, 19]
  - [20, 20, 1, 20]
  - [21, 21, 1, 21]
  - [22, 22, 1, 22]
  - [23, 23, 1, 23]
  - [24, 24, 1, 24]
  - [25, 25, 1, 25]
  - [26, 26, 1, 26]
  - [27, 27, 1, 27]
  - [28, 28, 1, 28]
  - [29, 29, 1, 29]
  - [30, 30, 1, 30]
  - [31, 31, 1, 31]
  - [32, 32, 1, 32]
  - [33, 33, 1, 33]
  - [34, 34, 1, 34]
  - [35, 35, 1, 35]
  - [36, 36, 1, 36]
  - [37, 37, 1, 37]
  - [38, 38, 1, 38]
  - [39, 39, 1, 39]
  - [40, 40, 1, 40]
  - [41, 41, 1, 41]
  - [42, 42, 1, 42]
  - [43, 43, 1, 43]
  - [44, 44, 1, 44]
  - [45, 45, 1, 45]
  - [46, 46, 1, 46]
  - [47, 47, 1, 47]
  - [48, 48, 1, 48]
  - [49, 49, 1, 49]
  - [50, 50, 1, 50]
  - [51, 51, 1, 51]
  - [52, 52, 1, 52]
  - [53, 53, 1, 53]
  - [54, 54, 1, 54]
  - [55, 55, 1, 55]
  - [56, 56, 1, 56]
  - [57, 57, 1, 57]
  - [58, 58, 1, 58]
  - [59, 59, 1, 59]
  - [60, 60, 1, 60]
  - [61, 61, 1, 61]
  - [62, 62, 1, 62]
  - [63, 63, 1, 63]
  - [64, 64, 1, 64]
  - [65, 65, 1, 65]
  - [66, 66, 1, 66]
  - [67, 67, 1, 67]
  - [68, 68, 1, 68]
  - [69, 69, 1, 69]
  - [70, 70, 1, 70]
  - [71, 71, 1, 71]
  - [72, 72, 1, 72]
  - [73, 73, 1, 73]
  - [74, 74, 1, 74]
  - [75, 75, 1, 75]
  - [76, 76, 1, 76]
  - [77, 77, 1, 77]
  - [78, 78, 1, 78]
  - [79, 79, 1, 79]
  - [80, 80, 1, 80]
  - [81, 81, 1, 81]
  - [82, 82, 1, 82]
  - [83, 83, 1, 83]
  - [84, 84, 1, 84]
  - [85, 85, 1, 85]
  - [86, 86, 1, 86]
  - [87, 87, 1, 87]
  - [88, 88, 1, 88]
  - [89, 89, 1, 89]
  - [90, 90, 1, 90]
  - [91, 91, 1, 91]
  - [92, 92, 1, 92]
  - [93, 93, 1, 93]
  - [94, 94, 1, 94]
  - [95, 95, 1, 95]
  - [96, 96, 1, 96]
  - [97, 97, 1, 97]
  - [98, 98, 1, 98]
  - [99, 99, 1, 99]
  - [100, 100, 1, 100]
...
space:drop()
---
...
-- upsert default tuple constraint
space = box.schema.space.create('test', { engine = 'sophia' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'num', 2, 'num'} })
---
...
space:upsert({0, 0}, {{'+', 3, 1}}, {0, 'key', 0})
---
- error: 'Supplied key type of part 1 does not match index part type: expected NUM'
...
space:drop()
---
...
-- upsert primary key modify (skipped)
space = box.schema.space.create('test', { engine = 'sophia' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'num'} })
---
...
space:upsert({0}, {{'+', 1, 1}, {'+', 2, 1}}, {0, 0})
---
...
space:get({0})
---
- [0, 1]
...
space:drop()
---
...
